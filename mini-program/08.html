<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>自定义组件 | yh-orange 学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/icon.png">
    <meta name="description" content="Personal Website">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.31114bff.css" as="style"><link rel="preload" href="/assets/js/app.ab7ccc71.js" as="script"><link rel="preload" href="/assets/js/3.4edb9727.js" as="script"><link rel="preload" href="/assets/js/1.8fa44146.js" as="script"><link rel="preload" href="/assets/js/66.794f64c3.js" as="script"><link rel="prefetch" href="/assets/js/10.117c3e7a.js"><link rel="prefetch" href="/assets/js/11.92bc9c31.js"><link rel="prefetch" href="/assets/js/12.f9afe2d3.js"><link rel="prefetch" href="/assets/js/13.814b4335.js"><link rel="prefetch" href="/assets/js/14.07ec2310.js"><link rel="prefetch" href="/assets/js/15.75624940.js"><link rel="prefetch" href="/assets/js/16.1b7695b0.js"><link rel="prefetch" href="/assets/js/17.3ebd7f2b.js"><link rel="prefetch" href="/assets/js/18.74427907.js"><link rel="prefetch" href="/assets/js/19.6afca700.js"><link rel="prefetch" href="/assets/js/20.62ea23cc.js"><link rel="prefetch" href="/assets/js/21.2a1e282a.js"><link rel="prefetch" href="/assets/js/22.3e86ef0c.js"><link rel="prefetch" href="/assets/js/23.86990ac5.js"><link rel="prefetch" href="/assets/js/24.901bce47.js"><link rel="prefetch" href="/assets/js/25.1dd59c95.js"><link rel="prefetch" href="/assets/js/26.d382260a.js"><link rel="prefetch" href="/assets/js/27.4f928d65.js"><link rel="prefetch" href="/assets/js/28.3b826946.js"><link rel="prefetch" href="/assets/js/29.6c5a6671.js"><link rel="prefetch" href="/assets/js/30.236895e5.js"><link rel="prefetch" href="/assets/js/31.b8047fdd.js"><link rel="prefetch" href="/assets/js/32.1d2b663c.js"><link rel="prefetch" href="/assets/js/33.a3528f35.js"><link rel="prefetch" href="/assets/js/34.03511400.js"><link rel="prefetch" href="/assets/js/35.de42440a.js"><link rel="prefetch" href="/assets/js/36.0fc211d4.js"><link rel="prefetch" href="/assets/js/37.26759b23.js"><link rel="prefetch" href="/assets/js/38.588a7518.js"><link rel="prefetch" href="/assets/js/39.15e5c940.js"><link rel="prefetch" href="/assets/js/4.e9ad93dd.js"><link rel="prefetch" href="/assets/js/40.c97b3712.js"><link rel="prefetch" href="/assets/js/41.303f2a45.js"><link rel="prefetch" href="/assets/js/42.73ca30bd.js"><link rel="prefetch" href="/assets/js/43.953b4c7c.js"><link rel="prefetch" href="/assets/js/44.6792b66b.js"><link rel="prefetch" href="/assets/js/45.0c7776f3.js"><link rel="prefetch" href="/assets/js/46.c0458285.js"><link rel="prefetch" href="/assets/js/47.926765f5.js"><link rel="prefetch" href="/assets/js/48.8fa5c2c8.js"><link rel="prefetch" href="/assets/js/49.7495e132.js"><link rel="prefetch" href="/assets/js/5.4c32532b.js"><link rel="prefetch" href="/assets/js/50.d63aadc0.js"><link rel="prefetch" href="/assets/js/51.9a363be7.js"><link rel="prefetch" href="/assets/js/52.28410924.js"><link rel="prefetch" href="/assets/js/53.acc6026d.js"><link rel="prefetch" href="/assets/js/54.e030fc14.js"><link rel="prefetch" href="/assets/js/55.0b081e5c.js"><link rel="prefetch" href="/assets/js/56.833ab305.js"><link rel="prefetch" href="/assets/js/57.b1608b93.js"><link rel="prefetch" href="/assets/js/58.be51ba8c.js"><link rel="prefetch" href="/assets/js/59.aec83a30.js"><link rel="prefetch" href="/assets/js/6.132c57c0.js"><link rel="prefetch" href="/assets/js/60.08ff5ee8.js"><link rel="prefetch" href="/assets/js/61.94a50c42.js"><link rel="prefetch" href="/assets/js/62.b2db71be.js"><link rel="prefetch" href="/assets/js/63.2a0181c3.js"><link rel="prefetch" href="/assets/js/64.7f023a4a.js"><link rel="prefetch" href="/assets/js/65.17b400ef.js"><link rel="prefetch" href="/assets/js/67.ce97d267.js"><link rel="prefetch" href="/assets/js/68.12100ad3.js"><link rel="prefetch" href="/assets/js/69.31abf334.js"><link rel="prefetch" href="/assets/js/7.49a9a74a.js"><link rel="prefetch" href="/assets/js/70.dcd9c229.js"><link rel="prefetch" href="/assets/js/71.6eb3c080.js"><link rel="prefetch" href="/assets/js/72.741c9df7.js"><link rel="prefetch" href="/assets/js/73.30fe6803.js"><link rel="prefetch" href="/assets/js/74.b146fd8c.js"><link rel="prefetch" href="/assets/js/75.b3e38e76.js"><link rel="prefetch" href="/assets/js/76.73926b71.js"><link rel="prefetch" href="/assets/js/77.65ea9d49.js"><link rel="prefetch" href="/assets/js/78.1d532daa.js"><link rel="prefetch" href="/assets/js/79.07ccc890.js"><link rel="prefetch" href="/assets/js/8.17f9c4ab.js"><link rel="prefetch" href="/assets/js/9.71be61be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.31114bff.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>yh-orange 学习笔记</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>Personal Website</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>yh-orange</span>
            
          <!---->
          2024
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/hero.jpg" alt="yh-orange 学习笔记" class="logo"> <span class="site-name">yh-orange 学习笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/base-js/" class="nav-link"><i class="undefined"></i>
  前端基础资料
</a></div><div class="nav-item"><a href="/informal-essay/" class="nav-link"><i class="undefined"></i>
  随笔
</a></div><div class="nav-item"><a href="/front-end-engineering/" class="nav-link"><i class="undefined"></i>
  前端工程化
</a></div><div class="nav-item"><a href="/ps/" class="nav-link"><i class="undefined"></i>
  拍照修图
</a></div><div class="nav-item"><a href="/other/" class="nav-link"><i class="undefined"></i>
  其他资料
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link router-link-active"><i class="undefined"></i>
  小程序资料
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <h3 class="name" data-v-39576ba9>
    yh-orange
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>60</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/base-js/" class="nav-link"><i class="undefined"></i>
  前端基础资料
</a></div><div class="nav-item"><a href="/informal-essay/" class="nav-link"><i class="undefined"></i>
  随笔
</a></div><div class="nav-item"><a href="/front-end-engineering/" class="nav-link"><i class="undefined"></i>
  前端工程化
</a></div><div class="nav-item"><a href="/ps/" class="nav-link"><i class="undefined"></i>
  拍照修图
</a></div><div class="nav-item"><a href="/other/" class="nav-link"><i class="undefined"></i>
  其他资料
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link router-link-active"><i class="undefined"></i>
  小程序资料
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>小程序相关知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mini-program/01.html" class="sidebar-link">小程序基础</a></li><li><a href="/mini-program/02.html" class="sidebar-link">小程序配置文件</a></li><li><a href="/mini-program/03.html" class="sidebar-link">小程序样式与组件</a></li><li><a href="/mini-program/04.html" class="sidebar-link">小程序事件系统</a></li><li><a href="/mini-program/05.html" class="sidebar-link">小程序模板语法</a></li><li><a href="/mini-program/06.html" class="sidebar-link">小程序生命周期</a></li><li><a href="/mini-program/07.html" class="sidebar-link">小程序原生 API</a></li><li><a href="/mini-program/08.html" aria-current="page" class="active sidebar-link">小程序自定义组件</a></li><li><a href="/mini-program/09.html" class="sidebar-link">小程序 npm 使用</a></li><li><a href="/mini-program/10.html" class="sidebar-link">小程序分包加载</a></li><li><a href="/mini-program/11.html" class="sidebar-link">小程序开放能力</a></li><li><a href="/mini-program/12.html" class="sidebar-link">小程序补充与拓展</a></li><li><a href="/mini-program/13.html" class="sidebar-link">上线发布</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>yh-orange</span>
            
          <!---->
          2024
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">自定义组件</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>yh-orange</span></i> <!----> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/mini-program/08.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="自定义组件"><a href="#自定义组件" class="header-anchor">#</a> 自定义组件</h2> <h3 id="_1-创建-注册-使用组件"><a href="#_1-创建-注册-使用组件" class="header-anchor">#</a> 1. 创建-注册-使用组件</h3> <p><strong>组件介绍</strong></p> <p>小程序目前已经支持组件化开发，可以将页面中的功能模块抽取成自定义组件，以便在不同的页面中重复使用；</p> <p>也可以将复杂的页面拆分成多个低耦合的模块，有助于代码维护。</p> <p>开发中常见的组件有两种:</p> <ol><li>公共组件：将页面内的功能模块抽象成自定义组件，以便在不同的页面中重复使用</li> <li>页面组件：将复杂的页面拆分成多个低耦合的模块，有助于代码维护</li></ol> <p>如果是公共组件，建议将其放在小程序的目录下的 <code>components</code> 文件夹中</p> <p>如果是页面组件，建议将其放在小程序对应页面目录下，当然你也可以放到页面的 <code>components</code> 文件夹中</p> <p>同时建议：<strong>一个组件一个文件夹，文件夹名称和组件名称保持一致</strong></p> <blockquote><p>📌 <strong>注意事项</strong>：</p> <ol><li>自定义组件的需要在 <code>json</code> 文件中需要配置 <code>component</code> 字段设为 <code>true</code></li> <li>自定义组件通过 <code>Component</code> 构造器进行构建，在构造器中可以指定组件的属性、数据、方法等</li></ol></blockquote> <p><strong>创建自定义组件：</strong></p> <p>创建组件的步骤很简单，以公共组件为例，创建的步骤如下：</p> <ol><li><p>在小程序的目录下新建 <code>components</code> 文件夹</p></li> <li><p>在 <code>components</code> 文件夹上，点击右键，选择<code>新建文件夹</code>，然后输入文件夹名称，我们建议文件夹的名称和组件的名称保持一致，这样方便后期对组件进行维护。我们这里新的的组件名称叫做：<code>custom-checkbox</code></p></li> <li><p>在新建的组件文件夹上，点击右键，选择<code>新建 Component</code>，然后输入组件的名称，组件的名称建议和文件夹保持一致</p></li> <li><p>此时就已经创建了一个功能组件<img src="http://8.131.91.46:6677/mina/base/%E5%88%9B%E5%BB%BA%E5%92%8C%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6.png" alt=""></p></li></ol> <p><strong>使用自定义组件</strong></p> <p>开发中常见的组件主要分为 公共组件 和 页面组件 两种，因此注册组件的方式也分为两种：</p> <ol><li>全局注册：在 <code>app.json</code> 文件中配置 <code>usingComponents</code> 节点进行引用声明，注册后可在任意组件使用</li> <li>局部注册：在页面的 <code>json</code> 文件中配置 <code>usingComponents</code> 节点进行引用声明，只可在当前页面使用</li></ol> <p><img src="http://8.131.91.46:6677/mina/base/%E5%88%9B%E5%BB%BA%E5%92%8C%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6-1.png" alt=""></p> <p>在配置 <code>usingComponents</code> 节点进行引用声明时，需要提供自定义组件的标签名和对应的自定义组件文件路径，语法如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;自定义组件的标签名&quot;</span><span class="token operator">:</span> <span class="token string">&quot;自定义组件文件路径&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这样，在页面的 <code>wxml</code> 中就可以像使用基础组件一样使用自定义组件。节点名即自定义组件的标签名，节点属性即传递给组件的属性值。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;custom-checkbox&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/custom-checkbox/custom-checkbox&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--pages/index/index.wxml--&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 将导入的自定义组件当成标签使用 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
                   <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-自定义组件-数据和方法"><a href="#_2-自定义组件-数据和方法" class="header-anchor">#</a> 2. 自定义组件-数据和方法</h3> <p>在组件的 .js 中，需要调用 <code>Component</code> 方法创建自定义组件，<code>Component</code> 中有以下两个属性：</p> <p><code>data</code> 数据：组件的内部数据</p> <p><code>methods</code> 方法：在组件中事件处理程序需要写到 <code>methods</code> 中才可以</p> <img src="http://8.131.91.46:6677/mina/base/自定义组件案例.png" style="zoom:80%;border:1px solid #ccc;"> <p><strong>落地代码：</strong></p> <p><code>➡️ components/custom-checkbox/custom-checkbox.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateChecked<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.wxss</code></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* components/custom-checkbox/custom-checkbox.wxss */</span>

<span class="token selector">.custom-checkbox-container</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">/**
   * 组件的初始数据：用来定义当前组件内部所需要使用的数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p><code>➡️ app.json</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;custom-checkbox&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./components/custom-checkbox/custom-checkbox&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>➡️ index.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token punctuation">/&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-自定义组件-属性"><a href="#_3-自定义组件-属性" class="header-anchor">#</a> 3. 自定义组件-属性</h3> <p>属性 Properties 是指组件的对外属性，主要用来接收组件使用者传递给组件内部的数据，和 data 一同用于组件的模板渲染</p> <blockquote><p>📌 注意事项：</p> <ol><li>设置属性类型需要使用 type 属性，属性类型是必填项，value 属性为默认值</li> <li>属性类型可以为 String、Number、Boolean、Object、Array ，也可以为 null 表示不限制类型</li></ol></blockquote> <img src="http://8.131.91.46:6677/mina/base/自定义组件案例.png" style="zoom:80%;border:1px solid #ccc;"> <p><strong>落地代码：</strong></p> <p><code>➡️ index.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- label 文本显示的内容 --&gt;</span>
<span class="token comment">&lt;!-- position 控制文本显示的位置 --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>匿名提交<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
+   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-box {{ position === <span class="token punctuation">'</span>right<span class="token punctuation">'</span> ? <span class="token punctuation">'</span>right<span class="token punctuation">'</span> : <span class="token punctuation">'</span>left<span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateChecked<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
+ 
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
+       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.wxss</code></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* components/custom-checkbox/custom-checkbox.wxss */</span>

<span class="token selector">.custom-checkbox-container</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox-box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox-box.left</span> <span class="token punctuation">{</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> row-reverse<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox-box.right</span> <span class="token punctuation">{</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom-checkbox</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

<span class="token operator">+</span>   <span class="token comment">/**
+    * 组件的属性列表：组件的对外属性，主要用来接收组件使用者传递给组件内部的属性以及数据
+    */</span>
<span class="token operator">+</span>   properties<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>     <span class="token comment">// 如果需要接收传递的属性，有两种方式：全写、简写</span>
<span class="token operator">+</span>     <span class="token comment">// label: String</span>
<span class="token operator">+</span> 
<span class="token operator">+</span>     label<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>       <span class="token comment">// type 组件使用者传递的数据类型</span>
<span class="token operator">+</span>       <span class="token comment">// 数据类型：String、Number、Boolean、Object、Array</span>
<span class="token operator">+</span>       <span class="token comment">// 也可以设置为 null，表示不限制类型</span>
<span class="token operator">+</span>       type<span class="token operator">:</span> String<span class="token punctuation">,</span>
<span class="token operator">+</span>       value<span class="token operator">:</span> <span class="token string">''</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span> 
<span class="token operator">+</span>     <span class="token comment">// 文字显示位置</span>
<span class="token operator">+</span>     position<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>       type<span class="token operator">:</span> String<span class="token punctuation">,</span>
<span class="token operator">+</span>       value<span class="token operator">:</span> <span class="token string">'right'</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span>
<span class="token operator">+</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的初始数据：用来定义当前组件内部所需要使用的数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">,</span>
<span class="token operator">+</span>        <span class="token comment">// label: '在组件内部也可以修改 properties 中的数据'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">+</span>       <span class="token comment">// 在 JS 中可以访问和获取 properties 中的数据</span>
<span class="token operator">+</span>       <span class="token comment">// 但是一般情况下，不建议修改，因为会造成数据流的混乱</span>
<span class="token operator">+</span>       <span class="token comment">// console.log(this.properties.label)</span>
      <span class="token comment">// console.log(this.data.isChecked)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="_4-组件-wxml-的-slot"><a href="#_4-组件-wxml-的-slot" class="header-anchor">#</a> 4. 组件 wxml 的 slot</h3> <p>在使用基础组件时，可以给组件传递子节点传递内容，从而将内容展示到页面中，自定义组件也可以接收子节点内容</p> <p>只不过在组件模板中需要定义 <code>&lt;slot /&gt;</code> 节点，用于承载组件引用时提供的子节点</p> <img src="http://8.131.91.46:6677/mina/base/自定义组件 slot.png" style="zoom:80%;border:1px solid #ccc;"> <p>默认情况下，一个组件的 wxml 中只能有一个 slot 。需要使用多 slot 时，可以在组件 js 中声明启用。</p> <p>同时需要给 slot 添加 name 来区分不同的 slot，给子节点内容添加 slot 属性来将节点插入到 对应的 slot 中</p> <img src="http://8.131.91.46:6677/mina/base/组件-具名插槽.png" style="zoom:80%;border:1px solid #ccc;"> <p><strong>知识点讲解：</strong></p> <p><code>➡️ custom01.html</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slot-top<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token comment">&lt;!-- slot 就是用来接收、承载子节点内容 --&gt;</span>
  <span class="token comment">&lt;!-- slot 只是一个占位符，子节点内容会将 slot 进行替换 --&gt;</span>
  <span class="token comment">&lt;!-- 默认插槽 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slot-bottom<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>➡️ custom01.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// components/custom01/custom01.js</span>

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 启用多 slot 支持</span>
    <span class="token literal-property property">multipleSlots</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>➡️ cart.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom01</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slot-top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我需要显示到顶部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    
  <span class="token comment">&lt;!-- 默认情况下，自定义组件的子节点内容不会进行展示 --&gt;</span>
  <span class="token comment">&lt;!-- 如果想内容进行展示，需要再组件模板中定义 slot 节点 --&gt;</span>
  我是子节点内容
    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slot-bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我需要显示到低部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom01</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>完善复选框案例</strong></p> <p><code>➡️ custom-checkbox.html</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-box {{ position === <span class="token punctuation">'</span>right<span class="token punctuation">'</span> ? <span class="token punctuation">'</span>right<span class="token punctuation">'</span> : <span class="token punctuation">'</span>left<span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateChecked<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
+       <span class="token comment">&lt;!-- lable 和 子节点内容都进行了展示 --&gt;</span>
+       <span class="token comment">&lt;!-- 要么展示 lable 要么展示 子节点内容 --&gt;</span>
+       <span class="token comment">&lt;!-- 如果用户传递了 lable 属性，就展示 lable --&gt;</span>
+       <span class="token comment">&lt;!-- 如果用户没有传递 lable 属性，就展示 子节点内容 --&gt;</span>
+       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ label !== <span class="token punctuation">'</span><span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
+ 
+       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span> <span class="token punctuation">/&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>➡️ index.html</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- label 文本显示的内容 --&gt;</span>
<span class="token comment">&lt;!-- position 控制文本显示的位置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>匿名提交<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  匿名提交 - 222
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_5-组件样式以及注意事项"><a href="#_5-组件样式以及注意事项" class="header-anchor">#</a> 5. 组件样式以及注意事项</h3> <p><strong>选择器使用注意事项：</strong></p> <p>类似于页面，自定义组件拥有自己的 <code>wxss</code> 样式，组件对应 <code>wxss</code> 文件的样式，只对组件wxml内的节点生效。</p> <p>编写组件样式时，需要注意以下几点：</p> <ol><li><p>app.wxss 或页面的 wxss 中使用了标签名（view）选择器（或一些其他特殊选择器）来直接指定样式
这些选择器会影响到页面和全部组件，通常情况下这是不推荐的做法</p></li> <li><p>组件和引用组件的页面不能使用 id 选择器(#a)、属性选择器([a]) 和 标签名选择器，请改用 class 选择器</p></li> <li><p>组件和引用组件的页面中使用后代选择器（.a .b）在一些极端情况下会有非预期的表现，如遇，请避免使用</p></li> <li><p>子元素选择器（.a&gt;.b）只能用于 view 组件与其子节点之间，用于其他组件可能导致非预期的情况。</p></li> <li><p>继承样式，如 font 、 color ，会从组件外继承到组件内。</p></li> <li><p>除继承样式外， 全局中的样式、组件所在页面的的样式对自定义组件无效 (除非更改组件样式隔离选项)</p></li></ol> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">#a</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">/* 在组件中不能使用 */</span>
<span class="token selector">[a]</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">/* 在组件中不能使用 */</span>
<span class="token selector">button</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">/* 在组件中不能使用 */</span>
<span class="token selector">.a &gt; .b</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">/* 除非 .a 是 view 组件节点，否则不一定会生效 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>落地代码：</strong></p> <p><code>➡️ custom02.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>给自定义组件设置样式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>➡️ custom02.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">/* components/custom02/custom02.wxss */</span>

<span class="token comment">/* 第一个注意事项：在自定义的 wxss 文件中，不允许使用标签选择器，ID 选择器，属性选择器 */</span>
<span class="token comment">/* 请改为 class 选择器 */</span>
<span class="token comment">/* text {
  color: lightseagreen;
} */</span>

<span class="token comment">/* #content {
  color: lightseagreen;
} */</span>

<span class="token comment">/* [id=content] {
  color: lightseagreen;
} */</span>

<span class="token comment">/* .content {
  color: lightseagreen;
} */</span>

<span class="token comment">/* 第二个注意事项：子选择器，只能用于 view 和 子组件，用于其他组件可能会出现样式失效的问题 */</span>
<span class="token comment">/* .content &gt; .label {
  color: lightseagreen;
} */</span>

<span class="token comment">/* 第三个注意事项：继承样式，例如：color\font 都会从组件外继承 */</span>

<span class="token comment">/* 第四个注意事项：全局样式、组件所在页面的样式文件中的样式都对自定义组件无效 */</span>

<span class="token comment">/* 第五个注意事项：官方不推荐做法 */</span>
<span class="token comment">/* 不建议在 全局样式文件 以及 父级页面之间使用标签选择器设置样式 */</span>
<span class="token comment">/* 如果是在全局样式文件中设置样式，会影响项目中全部的相同组件 */</span>
<span class="token comment">/* 如果是再页面样式文件中设置样式，会影响当前页面所有的相同组件 */</span>

<span class="token comment">/* 第六个注意事项： */</span>
<span class="token comment">/* 组件和组件使用者，如果使用了后代选择器，可能会出现一些非预期情况 */</span>
<span class="token comment">/* 如果出现，请避免 */</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><code>➡️ cate.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom02</span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>son test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是父级页面中的结构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>➡️ cate.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">/* pages/cate/cate.wxss */</span>

<span class="token comment">/* .custom  {
  color: lightseagreen;
  font-size: 50rpx;
} */</span>

<span class="token comment">/* .label {
  color: lightseagreen;
} */</span>

<span class="token comment">/* text {
  color: lightseagreen;
} */</span>

<span class="token selector">.parent .son.test </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> lightsalmon<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>➡️ app.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">/* .label {
  color: lightseagreen;
} */</span>

<span class="token comment">/* text {
  color: lightseagreen;
} */</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_6-组件样式隔离"><a href="#_6-组件样式隔离" class="header-anchor">#</a> 6. 组件样式隔离</h3> <p>默认情况下，自定义组件的样式只受到自定义组件 wxss 的影响。除非以下两种情况：</p> <ol><li><p><code>app.wxss</code> 或页面的 <code>wxss</code> 中使用了标签名（view）选择器（或一些其他特殊选择器）来直接指定样式，这些选择器会影响到页面和全部组件。通常情况下这是不推荐的做法。</p></li> <li><p>指定特殊的样式隔离选项 <code>styleIsolation</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'isolated'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <p><code>styleIsolation</code> 选项它支持以下取值：</p> <ul><li><code>isolated</code> 表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响（一般情况下的默认值）；</li> <li><code>apply-shared</code> 表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面；</li> <li><code>shared</code> 表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了 <code>apply-shared</code> 或 <code>shared</code> 的自定义组件。</li></ul> <p><strong>落地代码：</strong></p> <p><code>➡️ custom03.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--components/custom03/custom03.wxml--&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>演示组件样式隔离<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>➡️ custom03.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">/* components/custom03/custom03.wxss */</span>

<span class="token selector">.test </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> lightseagreen<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>➡️ custom03.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// components/custom03/custom03.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token comment">// styleIsolation：配置组件样式隔离</span>

    <span class="token comment">// isolated：开启样式隔离，默认值</span>
    <span class="token comment">// 在默认情况下，自定义组件和组件使用者如果存在相同的类名，类名不会相互影响</span>

    <span class="token comment">// apply-shared：表示组件使用者、页面的 wxss 样式能够影响到自定义组件</span>
    <span class="token comment">// 但是自定义组件的样式不会影响组件使用者、页面的 wxss 样式</span>
    <span class="token comment">// styleIsolation: &quot;apply-shared&quot;</span>

    <span class="token comment">// shared：表示组件使用者、页面的 wxss 样式能够影响到自定义组件</span>
    <span class="token comment">// 自定义组件的样式会影响组件使用者、页面的 wxss 样式</span>
    <span class="token comment">// 和其他使用了 apply-share 以及 share 属性的自定义组件</span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'shared'</span>

  <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><code>➡️ cate.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom03</span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>➡️ cate.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">.label </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> lightsalmon<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-拓展-小程序修改checkbox样式"><a href="#_7-拓展-小程序修改checkbox样式" class="header-anchor">#</a> 7. 拓展-小程序修改checkbox样式</h3> <p><strong>知识点：</strong></p> <p>技巧：在官方文档，找到官方提供的案例，审查元素，就能看到对应的类名</p> <img src="http://8.131.91.46:6677/mina/base/修改复选框样式.png" style="zoom:80%;border:1px solid #ccc;"> <blockquote><p>📌 <strong>注意事项</strong></p> <ol><li>.custom-checkbox .wx-checkbox-input {}：复选框没有选中时默认的样式</li> <li>.custom-checkbox .wx-checkbox-input-checked {}： 复选框选中时默认的样式</li> <li>.custom-checkbox .wx-checkbox-input.wx-checkbox-input-checked:before {}：复选框选中时 √ 样式</li></ol> <p>这几个类名，在全局样式文件、页面样式文件都可以对修改复选框样式，</p> <p><strong><code>但是在自定义组件内部使用的时候，需要添加 styleIsolation: 'shared' 属性</code></strong></p></blockquote> <p><strong>落地代码：</strong></p> <p><code>➡️ components/custom-checkbox/custom-checkbox.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">/* 复选框组件是公共组件 */</span>
<span class="token comment">/* 以后需要再多个页面或者需要再多个项目中进行使用 */</span>
<span class="token comment">/* 所以呢，需要先给复选框组件准备、设置一些默认样式 */</span>
<span class="token comment">/* 如果在其他页面或者其他项目中使用的时候，发现样式不符合产品需求 */</span>
<span class="token comment">/* 可以进行修改、对默认的样式进行修改 */</span>

<span class="token comment">/* 1. 需要给复选框设置默认样式 */</span>
<span class="token comment">/* 需要先找到小程序给复选框提供的类名，通过小程序给提供的类名修改才可以 */</span>
<span class="token comment">/* 需要先打开小程序开发文档，找到复选框文档，审查元素，进行查找 */</span>

<span class="token comment">/* 在自定义组件中，不能直接修改复选框样式 */</span>
<span class="token comment">/* 如果需要进行修改，需要设置 styleIsolation 才可以 */</span>
<span class="token comment">/* shared：修改其他页面的样式、组件使用者的样式、以及其他使用了 share 以及 apply-share 的组件 */</span>
<span class="token comment">/* 这时候，不是想要的结果 */</span>
<span class="token comment">/* 需求是：只想影响当前组件，可以添加命名空间 */</span>

<span class="token comment">/* 复选框没有选中时默认的样式 */</span>
<span class="token selector">.custom-checkbox .wx-checkbox-input </span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 24rpx <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 24rpx <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50% <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #fda007 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> -6rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 复选框选中时默认的样式 */</span>
<span class="token selector">.custom-checkbox .wx-checkbox-input-checked </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fda007 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 复选框选中时 √ 样式 */</span>
<span class="token selector">.custom-checkbox .wx-checkbox-input.wx-checkbox-input-checked:before </span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 22rpx<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 2. 组件使用者也能够修改默认的样式 */</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'shared'</span>
  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>➡️ index.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">/* 组件使用者修改复选框的样式 */</span>
<span class="token selector">.custom .custom-checkbox .wx-checkbox-input </span><span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid lightseagreen <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.custom .custom-checkbox .wx-checkbox-input-checked </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> lightseagreen <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_8-数据监听器"><a href="#_8-数据监听器" class="header-anchor">#</a> 8. 数据监听器</h3> <p><strong>知识点：</strong></p> <p>数据监听器可以用于监听和响应任何属性和数据字段的变化，有时，需要在一些数据字段被 setData 设置时，需要执行一些操作。那么就可以使用 <code>observers</code> 数据监听器来实现。语法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">obj</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// key 是需要检测数据</span>
    <span class="token comment">// value 是一个函数，函数接收一个形参作为参数，是最新的值</span>
    <span class="token function-variable function">num</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newNum</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newNum<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 数据监听器支持监听属性或内部数据的变化，可以同时监听多个</span>
    <span class="token string-property property">'num, count'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newNum<span class="token punctuation">,</span> newCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newNum<span class="token punctuation">,</span> newCount<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 监听器可以监听子数据字段</span>
    <span class="token string-property property">'obj.age'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newAge</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newAge<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// 如果需要监听所有子数据字段的变化，可以使用通配符 ** </span>
    <span class="token string-property property">'obj.**'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newAge</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newAge<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
        
    <span class="token string-property property">'arr[0]'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_9-组件间通信与事件"><a href="#_9-组件间通信与事件" class="header-anchor">#</a> 9. 组件间通信与事件</h3> <h4 id="_9-1-父往子传值"><a href="#_9-1-父往子传值" class="header-anchor">#</a> 9.1 父往子传值</h4> <p><strong>知识点：</strong></p> <p>父组件如果需要向子组件传递指定属性的数据，在 WXML 中需要使用数据绑定的方式</p> <p>与普通的 WXML 模板类似，使用数据绑定，这样就可以向子组件的属性传递动态数据。</p> <p>父组件如果需要向子组件传递数据，只需要两个步骤：</p> <p>1.在父组件 WXML 中使用 数据绑定 的方式向子组件传递动态数据</p> <p>2.子组件内部使用 properties 接收父组件传递的数据即可</p> <p><strong>知识点代码：</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 引用组件的页面模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>costom</span> <span class="token attr-name">prop-a</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ name }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop-b</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ age }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在组件内部，需要在 <code>Component</code> 构造器中通过 <code>properties</code> 接收传递的数据，接收方式有两种：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/**
   * 组件的属性列表 props
   */</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">propA</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">// 传递的数据类型</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 默认值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">propB</span><span class="token operator">:</span> Number <span class="token comment">// 简化的定义方式</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// coding...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>在子组件中也可以通过 <code>this.setData()</code> 对 <code>properties</code> 中的数据进行修改，但是一般不建议修改</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// components/custom01/custom01.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 修改列表中的数据</span>
    <span class="token function">updateProp</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">propB</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>propB <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>复选框组件案例：</strong></p> <p><code>➡️ index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
  <span class="token comment">// coding...</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>➡️ index.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">+</span>   <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'shared'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// coding...</span>

    <span class="token comment">// 复选框组件公共组件</span>
    <span class="token comment">// 需要再多个页面、在多个项目中进行使用</span>
    <span class="token comment">// 在使用的时候，有的地方希望默认是选中的效果，有的地方希望默认是没有被选中的效果</span>
    <span class="token comment">// 怎么处理 ？</span>
    <span class="token comment">// 首先让复选框默认还是没有被选中的效果</span>
    <span class="token comment">// 如果希望复选框默认被选中，这时候传递属性(checked=true)到复选框组件</span>
<span class="token operator">+</span>     checked<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>       type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
<span class="token operator">+</span>       value<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的初始数据：用来定义当前组件内部所需要使用的数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token operator">+</span>   observers<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>     <span class="token comment">// 如果需要将 properties 中的数据赋值给 data</span>
<span class="token operator">+</span>     <span class="token comment">// 可以使用 observers 进行处理</span>
<span class="token operator">+</span>     <span class="token function-variable function">checked</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newChecked</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>       <span class="token comment">// console.log(newChecked)</span>
<span class="token operator">+</span>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token operator">+</span>         isChecked<span class="token operator">:</span> newChecked
<span class="token operator">+</span>       <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">+</span>     <span class="token punctuation">}</span>
<span class="token operator">+</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token operator">+</span>         isChecked<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">,</span>
<span class="token operator">+</span>         <span class="token comment">// checked: !this.properties.checked</span>
        <span class="token comment">// label: '在组件内部也可以修改 properties 中的数据'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 在 JS 中可以访问和获取 properties 中的数据</span>
      <span class="token comment">// 但是一般情况下，不建议修改，因为会造成数据流的混乱</span>
      <span class="token comment">// console.log(this.properties.label)</span>
      <span class="token comment">// console.log(this.data.isChecked)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-box {{ position === <span class="token punctuation">'</span>right<span class="token punctuation">'</span> ? <span class="token punctuation">'</span>right<span class="token punctuation">'</span> : <span class="token punctuation">'</span>left<span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
+     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateChecked<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- lable 和 子节点内容都进行了展示 --&gt;</span>
      <span class="token comment">&lt;!-- 要么展示 lable 要么展示 子节点内容 --&gt;</span>
      <span class="token comment">&lt;!-- 如果用户传递了 lable 属性，就展示 lable --&gt;</span>
      <span class="token comment">&lt;!-- 如果用户没有传递 lable 属性，就展示 子节点内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ label !== <span class="token punctuation">'</span><span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="_9-2-子往父传值"><a href="#_9-2-子往父传值" class="header-anchor">#</a> 9.2 子往父传值</h4> <p>子组件如果需要向父组件传递数据，可以通过小程序提供的事件系统实现传递传递，可以传递任意数据。</p> <p>事件系统是组件间通信的主要方式之一，自定义组件可以触发任意的事件，引用组件的页面可以监听这些事件，流程如下：</p> <ol><li>自定义组件触发事件时，需要使用 <code>triggerEvent</code> 方法发射一个自定义的事件</li> <li>自定义组件标签上通过 bind 方法监听发射的事件</li></ol> <p><strong>触发事件：</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 在自定义组件中 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">plain</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sendData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>传递数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// components/custom05/custom05.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// 组件的初始数据</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">666</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 组件的方法列表</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token comment">// 将数据传递给父组件</span>
    <span class="token function">sendData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token comment">// 如果需要将数据传递给父组件</span>
      <span class="token comment">// 需要使用 triggerEvent 发射自定义事件</span>
      <span class="token comment">// 第二个参数，是携带的参数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'myevent'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>num<span class="token punctuation">)</span>
      
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>监听事件：</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{ num }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 需要在自定义组件标签上通过 bind 方法绑定自定义事件，同时绑定事件处理函数 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom05</span> <span class="token attr-name"><span class="token namespace">bind:</span>myevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getData<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">getData</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可以通过事件对象.detail 获取子组件传递给父组件的数据</span>
    <span class="token comment">// console.log(event)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> event<span class="token punctuation">.</span>detail
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>复选框组件案例：</strong></p> <p><code>➡️ components/custom-checkbox/custom-checkbox.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">/**
   * 组件的方法列表：在组件中，所有的事件处理程序都需要写到 methods 方法中
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// 更新复选框的状态</span>
    <span class="token function">updateChecked</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">,</span>
        <span class="token comment">// label: '在组件内部也可以修改 properties 中的数据'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 在 JS 中可以访问和获取 properties 中的数据</span>
      <span class="token comment">// 但是一般情况下，不建议修改，因为会造成数据流的混乱</span>
      <span class="token comment">// console.log(this.properties.label)</span>
      <span class="token comment">// console.log(this.data.isChecked)</span>

<span class="token operator">+</span>       <span class="token comment">// 目前复选框组件的状态是存储在复选框组件内部的、存储在自定义组件内部的</span>
<span class="token operator">+</span>       <span class="token comment">// 但是，在以后实际开发中，组件使用者、父组件有时候也需要获取到复选框内部的状态</span>
<span class="token operator">+</span>       <span class="token comment">// 怎么办 ？</span>
<span class="token operator">+</span>       <span class="token comment">// 这时候，自定义组件内部就需要发射一个自定义事件，</span>
<span class="token operator">+</span>       <span class="token comment">// 如果组件使用者、父组件需要使用数据，绑定自定义事件进行获取即可</span>
<span class="token operator">+</span>       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'changechecked'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><code>➡️ index.html</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getchild<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">+</span>  <span class="token attr-name"><span class="token namespace">bind:</span>changechecked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getData<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>➡️ index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">isChecked</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">getData</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'提交'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请同意协议！'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_9-3-获取组件实例"><a href="#_9-3-获取组件实例" class="header-anchor">#</a> 9.3 获取组件实例</h4> <p>如果前面两种方式不足以满足需要。</p> <p>可在父组件里调用 <code>this.selectComponent()</code> ，获取子组件的实例对象，就可以直接拿到子组件的任意数据和方法。调用时需要传入一个匹配选择器 <code>selector</code>，如：<code>this.selectComponent(&quot;.my-component&quot;)</code>。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 父组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>costom</span> <span class="token attr-name"><span class="token namespace">bind:</span>myevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getChildComponent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 父组件</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getChildComponent</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'.custom'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>复选框组件案例：</strong></p> <p><code>➡️ index.html</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-checkbox</span>
  <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>我已阅读并同意 用户协议 和 隐私协议<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">+</span>   <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">+</span>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">bind:</span>changechecked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getData<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  我已阅读并同意 用户协议 和 隐私协议 - 111
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-checkbox</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">plain</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getChild<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取子组件实例对象<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>➡️ index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// coding...</span>

  <span class="token comment">// 获取子组件的实例对象</span>
  <span class="token function">getChild</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// this.selectComponent 方法获取子组件实例对象</span>
    <span class="token comment">// 获取到实例对象以后，就能获取子组件所有的数据、也能调用子组件的方法</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'#child'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>isChecked<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_10-组件生命周期"><a href="#_10-组件生命周期" class="header-anchor">#</a> 10. 组件生命周期</h3> <p>组件的生命周期：指的是组件自身的一些钩子函数，这些函数在特定的时间节点时被自动触发</p> <p>组件的生命周期函数需要在 <code>lifetimes</code> 字段内进行声明</p> <p>最重要的生命周期是 <code>created</code> <code>attached</code> <code>detached</code> 包含一个组件生命周期流程的最主要时间点</p> <table><thead><tr><th style="text-align:left;">定义段</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>created</code></td> <td style="text-align:left;">在组件实例刚刚被创建时执行，注意此时不能调用 <code>setData</code> （还没有对模板解析）</td></tr> <tr><td style="text-align:left;"><code>attached</code></td> <td style="text-align:left;">在组件实例进入页面节点树时执行 (模板已经解析完毕，并且挂载到页面上)</td></tr> <tr><td style="text-align:left;">ready</td> <td style="text-align:left;">在组件布局完成后执行</td></tr> <tr><td style="text-align:left;">moved</td> <td style="text-align:left;">在组件实例被移动到节点树另一个位置时执行</td></tr> <tr><td style="text-align:left;"><code>detached</code></td> <td style="text-align:left;">在组件实例被从页面节点树移除时执行 (组件被销毁了)</td></tr></tbody></table> <img src="http://8.131.91.46:6677/mina/base/组件生命周期.png" style="zoom:80%;border:1px solid #ccc;"> <ol><li><p>【组件实例刚刚被创建好时】， <code>created</code> 生命周期被触发。此时，组件数据 <code>this.data</code> 就是在 <code>Component</code> 构造器中定义的数据 <code>data</code> 。 <strong>此时还不能调用 <code>setData</code> 。</strong> 通常情况下，这个生命周期只应该用于给组件 <code>this</code> 添加一些自定义属性字段。</p></li> <li><p>【在组件完全初始化完毕】、进入页面节点树后， <code>attached</code> 生命周期被触发。此时， <code>this.data</code> 已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行。</p></li> <li><p>【在组件离开页面节点树后】， <code>detached</code> 生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则 <code>detached</code> 会被触发。</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  
  <span class="token literal-property property">lifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在组件实例刚刚被创建时执行，注意此时不能调用 setData </span>
      <span class="token comment">// 一般用来为组件添加一些自定义属性字段。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// attached 在组件完全初始化完毕、进入页面节点树后执行</span>
      <span class="token comment">// 模板已经解析完毕，并且挂载到页面上</span>
      <span class="token comment">// 一般都是在这里写对应的交互</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">detached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在组件实例被从页面节点树移除时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// coding...</span>
  <span class="token punctuation">}</span>
    
  <span class="token comment">// coding...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_11-组件所在页面的生命周期"><a href="#_11-组件所在页面的生命周期" class="header-anchor">#</a> 11. 组件所在页面的生命周期</h3> <p>组件还有一些特殊的生命周期，这类生命周期和组件没有很强的关联</p> <p>主要用于组件内部监听父组件的展示、隐藏状态，从而方便组件内部执行一些业务逻辑的处理</p> <p>组件所在页面的生命周期有 4 个： show、 hide、 resize、 routeDone，需要在 <code>pageLifetimes</code> 字段内进行声明</p> <img src="http://8.131.91.46:6677/mina/base/组件所在页面的生命周期.png" style="zoom:70%;border:1px solid #ccc;"> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// components/custom06/custom06.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// coding...</span>

  <span class="token comment">// 组件所在页面的生命周期</span>
  <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token comment">// 监听组件所在的页面展示(后台切前台)状态</span>
    <span class="token function">show</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件所在的页面被展示'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 监听组件所在的页面隐藏(前台切后台、点击 tabBar)状态</span>
    <span class="token function">hide</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件所在的页面被隐藏'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_12-小程序生命周期总结"><a href="#_12-小程序生命周期总结" class="header-anchor">#</a> 12. 小程序生命周期总结</h3> <p>小程序冷启动，钩子函数执行的顺序</p> <img src="http://8.131.91.46:6677/mina/base/小程序生命周期总结-1.png" style="zoom:80%;border:1px solid #ccc;"> <p>保留当前页面(navigate) 以及 关闭当前页面(redirect)</p> <img src="http://8.131.91.46:6677/mina/base/小程序生命周期总结-2.png" style="zoom:80%;border:1px solid #ccc;"> <p>切后台 以及 切前台(热启动)</p> <img src="http://8.131.91.46:6677/mina/base/小程序生命周期总结-3.png" style="zoom:80%;border:1px solid #ccc;"> <h3 id="_13-拓展-使用-component-构造页面"><a href="#_13-拓展-使用-component-构造页面" class="header-anchor">#</a> 13. 拓展：使用 Component 构造页面</h3> <p>Component 方法用于创建自定义组件</p> <p>小程序的页面也可以视为自定义组件，因此页面也可以使用 Component 方法进行创建，从而实现复杂的页面逻辑开发</p> <blockquote><p>📌 <strong>注意事项：</strong></p> <ol><li><p>要求对应 json 文件中包含 usingComponents 定义段</p></li> <li><p>页面使用 Component 构造器创建，需要定义与普通组件一样的字段与实例方法</p></li> <li><p>页面 Page 中的一些生命周期方法（如 onLoad() 等以“on”开头的方法），在 Component 中要写在 methods 属性中才能生效</p></li> <li><p>组件的属性 Properties 可以用于接收页面的参数，在 onLoad() 中可以通过 this.data 拿到对应的页面参数</p></li></ol></blockquote> <p><strong>落地代码：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// 为什么需要使用 Component 方法进行构造页面</span>
  <span class="token comment">// Component 方法功能比 Page 方法强大很多</span>
  <span class="token comment">// 如果使用 Component 方法构造页面，可以实现更加复杂的页面逻辑开发</span>

  <span class="token comment">// 小程序页面也可以使用 Component 方法进行构造</span>
  <span class="token comment">// 注意事项：</span>
  <span class="token comment">// 1. 要求 .json 文件中必须包含 usingComponents 字段</span>
  <span class="token comment">// 2. 里面的配置项需要和 Component 中的配置项保持一致</span>
  <span class="token comment">// 3. 页面中 Page 方法有一些钩子函数、事件监听方法，这些钩子函数、事件监听方法必须方法 methods 对象中</span>
  <span class="token comment">// 4. 组件的属性 properties 也可以接受页面的参数，在 onLoad 钩子函数中可以通过 this.data 进行获取</span>

  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// onLoad () {</span>
  <span class="token comment">//   console.log('页面加载 - 1')</span>
  <span class="token comment">// },</span>

  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token comment">// 更新 name</span>
    <span class="token function">updateName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jerry'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// console.log('页面加载 - 2')</span>
      <span class="token comment">// console.log(options)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="_14-拓展-behaviors"><a href="#_14-拓展-behaviors" class="header-anchor">#</a> 14. 拓展：behaviors</h3> <p>小程序的 behaviors 方法是一种代码复用的方式，可以将一些通用的逻辑和方法提取出来，然后在多个组件中复用，从而减少代码冗余，提高代码的可维护性。</p> <p><strong>如果需要 behavior 复用代码，需要使用 Behavior() 方法</strong>，每个 behavior 可以包含一组属性、数据、生命周期函数和方法</p> <p>组件引用它时，它的属性、数据和方法会被合并到组件中，生命周期函数也会在对应时机被调用。</p> <p><strong>注册 behavior：</strong></p> <p>如果需要注册一个 <code>behavior</code>，需要借助 <code>Behavior()</code> 方法，接受一个 <code>Object</code> 类型的参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// my-behavior.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">myBehaviorProperty</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">myBehaviorData</span><span class="token operator">:</span> <span class="token string">'my-behavior-data'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] created'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] attached'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] ready'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">myBehaviorMethod</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[my-behavior] log by myBehaviorMehtod'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong>使用 behavior：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// my-component.js</span>
<span class="token keyword">const</span> myBehavior <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'my-behavior'</span><span class="token punctuation">)</span>

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>myBehavior<span class="token punctuation">]</span>
  
  <span class="token comment">// coding...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>组件和它引用的 behavior 中可以包含同名的字段，对这些字段的处理方法如下：</strong></p> <ol><li><p>如果有同名的属性或方法，采用 “就近原则”，组件会覆盖 behavior 中的同名属性或方法</p></li> <li><p>如果有同名的数据字段且都是对象类型，会进行对象合并，其余情况会 采用 “就近原则” 进行数据覆盖</p></li> <li><p>生命周期函数和 observers 不会相互覆盖，会是在对应触发时机被逐个调用，也就是都会被执行</p></li></ol> <p>详细的规则：<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html#%E5%90%8C%E5%90%8D%E5%AD%97%E6%AE%B5%E7%9A%84%E8%A6%86%E7%9B%96%E5%92%8C%E7%BB%84%E5%90%88%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">同名字段的覆盖和组合规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_15-拓展-外部样式类"><a href="#_15-拓展-外部样式类" class="header-anchor">#</a> 15. 拓展：外部样式类</h3> <p>默认情况下，组件和组件使用者之间如果存在相同的类名不会相互影响，组件使用者如果想修改组件的样式，需要就解除样式隔离，但是解除样式隔离以后，在极端情况下，会产生样式冲突、CSS 嵌套太深等问题，从而给我们的开发带来一定的麻烦。</p> <p><strong>外部样式类：在使用组件时，组件使用者可以给组件传入 CSS 类名，通过传入的类名修改组件的样式。</strong></p> <p>如果需要使用外部样式类修改组件的样式，<strong>在 Component 中需要用 externalClasses 定义若干个外部样式类。</strong></p> <p>外部样式类的使用步骤：</p> <p>1.在 Component 中用 externalClasses 定义段定义若干个外部样式类</p> <p>2.自定义组件标签通过 属性绑定 的方式提供一个样式类，属性是 externalClasses 定义的元素，属性值是传递的类名</p> <p>3.将接受到的样式类用于自定义组件内部</p> <blockquote><p>📌<strong>注意事项：</strong></p> <p>​	在同一个节点上使用普通样式类和外部样式类时，两个类的优先级是未定义的</p> <p>​	因此需要添加 !important 以保证外部样式类的优先级</p></blockquote> <p><strong>落地代码：</strong></p> <p><code>➡️ custom09.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// components/custom09/custom09.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token comment">// 组件接受的外部样式类</span>
  <span class="token literal-property property">externalClasses</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'extend-class'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>➡️ custom09.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 在同一个节点上，如果存在外部样式类 和 普通的样式类 --&gt;</span>
<span class="token comment">&lt;!-- 两个类的优先级是未定义的 --&gt;</span>
<span class="token comment">&lt;!-- 建议：在使用外部样式类的时，样式需要通过 !important 添加权重 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extend-class box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>通过外部样式类修改组件的样式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>➡️ custom09.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">.box </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> lightseagreen<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>➡️ profile.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 属性是在 externalClasses 里面定义的元素 --&gt;</span>
<span class="token comment">&lt;!-- 属性值必须是一个类名 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom09</span> <span class="token attr-name">extend-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-class<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>➡️ profile.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">/* pages/index/index.wxss */</span>

<span class="token selector">.my-class </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> lightsalmon <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_16-完善复选框案例并总结自定义组件"><a href="#_16-完善复选框案例并总结自定义组件" class="header-anchor">#</a> 16. 完善复选框案例并总结自定义组件</h3> <p><strong>总结自定义组件：</strong></p> <ol><li><p>组件基本使用：数据、属性、方法、插槽</p></li> <li><p>组件样式使用：组件样式、注意事项、样式隔离、外部样式类</p></li> <li><p>组件通信传值：父往子传值、子往父传值、获取组件实例</p></li> <li><p>组件生命周期：组件的生命周期、组件所在页面的生命周期、总结了小程序全部的生命周期</p></li> <li><p>组件数据监听器：observers</p></li> <li><p>组件拓展：使用 Component 构造页面、组件复用机制 behaviors 等</p></li></ol> <p><strong>完善复选框案例</strong></p> <p><code>➡️ components/custom-checkbox/custom-checkbox.wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--components/custom-checkbox/custom-checkbox.wxml--&gt;</span>
<span class="token comment">&lt;!-- &lt;text&gt;我是自定义组件&lt;/text&gt; --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox-box {{ position === <span class="token punctuation">'</span>right<span class="token punctuation">'</span> ? <span class="token punctuation">'</span>right<span class="token punctuation">'</span> : <span class="token punctuation">'</span>left<span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
+    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom-checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ isChecked }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateChecked<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- lable 和 子节点内容都进行了展示 --&gt;</span>
        <span class="token comment">&lt;!-- 要么展示 lable 要么展示 子节点内容 --&gt;</span>
        <span class="token comment">&lt;!-- 如果用户传递了 lable 属性，就展示 lable --&gt;</span>
        <span class="token comment">&lt;!-- 如果用户没有传递 lable 属性，就展示 子节点内容 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ label !== <span class="token punctuation">'</span><span class="token punctuation">'</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ label }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
+    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>➡️ components/custom-checkbox/custom-checkbox.wxss</code></p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">+ .custom-checkbox-box .custom-label </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/3/2024, 8:19:22 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/mini-program/07.html" class="prev">
            小程序原生 API
          </a></span> <span class="next"><a href="/mini-program/09.html">
            小程序 npm 使用
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/mini-program/08.html#自定义组件" class="sidebar-link reco-side-自定义组件" data-v-cb1513f6>自定义组件</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_1-创建-注册-使用组件" class="sidebar-link reco-side-_1-创建-注册-使用组件" data-v-cb1513f6>1. 创建-注册-使用组件</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_2-自定义组件-数据和方法" class="sidebar-link reco-side-_2-自定义组件-数据和方法" data-v-cb1513f6>2. 自定义组件-数据和方法</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_3-自定义组件-属性" class="sidebar-link reco-side-_3-自定义组件-属性" data-v-cb1513f6>3. 自定义组件-属性</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_4-组件-wxml-的-slot" class="sidebar-link reco-side-_4-组件-wxml-的-slot" data-v-cb1513f6>4. 组件 wxml 的 slot</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_5-组件样式以及注意事项" class="sidebar-link reco-side-_5-组件样式以及注意事项" data-v-cb1513f6>5. 组件样式以及注意事项</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_6-组件样式隔离" class="sidebar-link reco-side-_6-组件样式隔离" data-v-cb1513f6>6. 组件样式隔离</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_7-拓展-小程序修改checkbox样式" class="sidebar-link reco-side-_7-拓展-小程序修改checkbox样式" data-v-cb1513f6>7. 拓展-小程序修改checkbox样式</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_8-数据监听器" class="sidebar-link reco-side-_8-数据监听器" data-v-cb1513f6>8. 数据监听器</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_9-组件间通信与事件" class="sidebar-link reco-side-_9-组件间通信与事件" data-v-cb1513f6>9. 组件间通信与事件</a></li><li class="level-4" data-v-cb1513f6><a href="/mini-program/08.html#_9-1-父往子传值" class="sidebar-link reco-side-_9-1-父往子传值" data-v-cb1513f6>9.1 父往子传值</a></li><li class="level-4" data-v-cb1513f6><a href="/mini-program/08.html#_9-2-子往父传值" class="sidebar-link reco-side-_9-2-子往父传值" data-v-cb1513f6>9.2 子往父传值</a></li><li class="level-4" data-v-cb1513f6><a href="/mini-program/08.html#_9-3-获取组件实例" class="sidebar-link reco-side-_9-3-获取组件实例" data-v-cb1513f6>9.3 获取组件实例</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_10-组件生命周期" class="sidebar-link reco-side-_10-组件生命周期" data-v-cb1513f6>10. 组件生命周期</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_11-组件所在页面的生命周期" class="sidebar-link reco-side-_11-组件所在页面的生命周期" data-v-cb1513f6>11. 组件所在页面的生命周期</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_12-小程序生命周期总结" class="sidebar-link reco-side-_12-小程序生命周期总结" data-v-cb1513f6>12. 小程序生命周期总结</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_13-拓展-使用-component-构造页面" class="sidebar-link reco-side-_13-拓展-使用-component-构造页面" data-v-cb1513f6>13. 拓展：使用 Component 构造页面</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_14-拓展-behaviors" class="sidebar-link reco-side-_14-拓展-behaviors" data-v-cb1513f6>14. 拓展：behaviors</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_15-拓展-外部样式类" class="sidebar-link reco-side-_15-拓展-外部样式类" data-v-cb1513f6>15. 拓展：外部样式类</a></li><li class="level-3" data-v-cb1513f6><a href="/mini-program/08.html#_16-完善复选框案例并总结自定义组件" class="sidebar-link reco-side-_16-完善复选框案例并总结自定义组件" data-v-cb1513f6>16. 完善复选框案例并总结自定义组件</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.ab7ccc71.js" defer></script><script src="/assets/js/3.4edb9727.js" defer></script><script src="/assets/js/1.8fa44146.js" defer></script><script src="/assets/js/66.794f64c3.js" defer></script>
  </body>
</html>
